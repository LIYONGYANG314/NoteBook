# 01背包问题

## 问题描述

背包的大小是$W$，而现在有$N$件商品，如何选择可以使得背包所装物品的价值达到最大？

## 分析

N件商品如果在没有限制的情况下那么自然拿的越多价值越大。但是现在被背包容量$W$所限制，所以我们需要找到满足限制的最大商品组合。当然可以选择暴力求解那么对于每件商品就只有两种可能：1、选择；2、不选择，可以算一下复杂度会达到$O(2^N)$时间复杂度也太大了，所以它是一个求解的办法但是却不是最好的。

对于多件商品一下子去计算这个问题是麻烦的，于是采用递归的思想，把这么一个大的问题化简为规模更小的问题，逐步进行求解。

对于一件商品，关键还是考虑放还是不放这件商品到背包中。暴力求解就是考虑了太多，它像是从全局的角度在解决问题，也就是不管好与坏，我总要把你这种情况遍历到才行，这些所有种情况中，很大一部分是没有必要的，那些种情况明显不会满足题目条件，但是在暴力求解的情况下却还是会对其进行遍历验证，所以这种暴力求解才如此糟糕。

##问题解决

对于这种01背包问题的求解，我们可以做出下面这样的一个表：

<img src="..img/6.jpeg" alt="6" style="zoom:50%;" />

黄色数字代表已经遍历的商品数量，而绿色数字代表着背包的容量。于是以第2行为例，可以理解为，对于前两件商品，在容量为1、2、3、4的情况下最好的选择策略能带来的价值是多大。当我们把上面的格子填满了之后最后一格就是$(4,4)$，表示着前4件商品在容量为4的情况下最好的策略能带来的最高价值是多少，所以$(4,4)$就是最终的答案。

对于一个商品自然是考虑两种情况，放入背包还是不放入背包。对于上面的表我们认为它是一个体现不同情况下能取到的最大价值的表。既然如此，在遍历到第$k$件商品的时候，如果我们选择要放入这件商品，那是不是应该腾出$W_k$的空间给这件商品，那是不是在当前所给空间为$W_{temp}$的情况下前$k-1$件商品只能装在$W_{temp}-W_k$的空间中，然后对应到上表，必然能求到这样情况下能取得的最大价值。而对于另外一种情况，就对应到$(k-1, W_{temp})$的值就行了，所以最后比较这两个值就可以决定是否要把这个商品加入到背包中。但是注意这里计算的仅仅是对于$k,W_{temp}$的情况，并非最终的结果，但是这个中间值会为后面的计算提供帮助所以必须要求出来。

而这么一张表是从很简单的条件开始的，而后面的格子需要前面的格子提供数据，而有了前面的格子的数据后面的格子也很容易能求出来，所以能把上面的表全给填完，当填完了过后得到的最后一个格子就是我们最终的结果。
